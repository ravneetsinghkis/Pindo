<div class="totalDashboard" [ngClass]="{'customrelPosn':totalDataToPrepoluate?.application_dtls?.status==5}"
	*ngIf="afterInit">
	<div class="notify_user" *ngIf="totalDataToPrepoluate?.application_dtls?.status==5">You have already referred a
		Doer/Doers. So you cannot send a new quotation.</div>
	<app-raise-dispute-form [isHiddenPinId]="fetchedPinDetails.id" #popUpRaiseDispute></app-raise-dispute-form>
	<div class="container">
		<div class="mainHeading">
			<div class="meta-heading">
				<button mat-icon-button class="btn-back float-left mr-3" (click)="backClicked()"><span
						class="or or-return"></span></button>
				<h3>
					<ng-container *ngIf="totalDataToPrepoluate?.pin_details?.status==1">Send Quotation</ng-container>
					<ng-container *ngIf="totalDataToPrepoluate?.pin_details?.status==2">Ongoing Pin</ng-container>
					<ng-container *ngIf="totalDataToPrepoluate?.pin_details?.status==3">Completed Pin</ng-container>
					<ng-container *ngIf="totalDataToPrepoluate?.pin_details?.status==4">Disputed Pin</ng-container>
				</h3>
				<p>Check the job details and set your quotation accordingly</p>
				<mat-button-toggle-group name="fontStyle" aria-label="Font Style" class="total_ongoingOptions"
					*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && totalDataToPrepoluate?.pin_details?.status!=4">
					<!-- <mat-button-toggle>					  	
					Complete Pin				
				  </mat-button-toggle> -->
					<mat-button-toggle (click)="toggleChildPopup()">
						Raise Dispute
					</mat-button-toggle>
				</mat-button-toggle-group>
			</div>
		</div>
		<div class="row mb-3"
			[ngClass]="{'deactive': totalDataToPrepoluate?.pin_details?.status==4 && totalDataToPrepoluate?.pin_details?.dispute!=null }">
			<div class="col-lg-8">
				<mat-card class="pindoCart mb-4">
					<mat-card-header>
						<mat-card-title class="posn_rel">
							Job Details
							<p class="float-right total_qtn" *ngIf="toshowQuotation">Total Amount<span>$
									{{totalPrice | number:'.2-2'}}</span></p>
						</mat-card-title>
					</mat-card-header>
					<mat-card-content>
						<ng-container *ngIf="show_data">
							<div class="subcard-heading">
								<p><span>{{fetchedPinDetails?.created_at?.split('-').join('/') | date:'dd LLL yyyy'}}
										{{fetchedPinDetails?.created_at?.split('-').join('/') | date:'h:mm a'}}</span>|<span>ID:
										{{fetchedPinDetails?.pin_unique_id}}</span></p>
								<h5>{{fetchedPinDetails?.title}}</h5>
								<div class="heading-info mt-3 mb-5">
									<span class="quotationlist green-pin">
										{{fetchedPinDetails?.parent_child_cat?.parent_det?.name}} >
										{{fetchedPinDetails?.parent_child_cat?.name}}
									</span>
									<span class="quotationlist" *ngIf="fetchedPinDetails?.has_budget==0">No Budget</span>
									<span class="quotationlist" *ngIf="fetchedPinDetails?.has_budget==1">$
										{{fetchedPinDetails.budget_value | number:'.2-2'}}</span>
									<span class="quotationlist">
										<a [href]="addressLink" target="_blank"><i
												class="fas fa-map-marker-alt mr-2"></i>{{fetchedPinDetails?.address}}</a>
									</span>
								</div>
							</div>
							<h6 class="maincardsubHeading">Job Description</h6>
							<p [innerHtml]="fetchedPinDetails?.description"></p>
							<ng-container *ngIf="fetchedPinDetails?.attachments?.length>0">
								<h6 class="maincardsubHeading">Attachments Uploaded by Pinner</h6>
								<p class="attachment_grp">Added Attachment:
									<span *ngFor="let eachattachment of fetchedPinDetails?.attachments;let i = index;"><a
											href="{{baseCompUrl}}/jobs/{{eachattachment?.name}}"
											target="_blank">{{eachattachment?.original_name}}</a></span>
								</p>
							</ng-container>
						</ng-container>
					</mat-card-content>
				</mat-card>
			</div>
			<div class="col-md-4">
				<div class="indv-doer hire-doerapplyquote" *ngIf="show_data">
					<div class="profDoer d-flex mb-4 align-items-center">
						<!-- <span class="prof_img">
								<img src="assets/images/inddoer1.jpg"  alt="">
							</span> -->
						<span class="prof_img" *ngIf="fetchedPinDetails?.pinner_details?.profile_photo!=''">
							<img src="{{baseCompUrl}}/profile_photo/{{fetchedPinDetails?.pinner_details?.profile_photo}}"
								onError="this.src='assets/images/inddoer1.jpg';" alt="">
						</span>
						<span class="prof_img no-img" *ngIf="fetchedPinDetails?.pinner_details?.profile_photo==''">
							<img src="assets/images/inddoer1.jpg" alt="">
						</span>
						<div class="prof_infoDoer">
							<h4>{{fetchedPinDetails?.pinner_details?.name}} - {{fetchedPinDetails?.pinner_details?.tag_line}}</h4>
						</div>
					</div>
					<div class="doerStats mb-4">
						<ng-container *ngIf="totalDataToPrepoluate?.pin_details?.pin_tasks.length>0;">
							<h4>Job Tasks</h4>
							<div class="task-list mb-4">
								<span
									*ngFor="let eachPinTask of totalDataToPrepoluate?.pin_details?.pin_tasks">{{eachPinTask?.task_details?.name}}</span>
							</div>
						</ng-container>
						<ng-container *ngIf="fetchedPinDetails?.job_type!=null">
							<span class="quotationlist" *ngIf="fetchedPinDetails?.job_type==0">One-time job</span>
							<span class="quotationlist" *ngIf="fetchedPinDetails?.job_type==1">Recurring</span>
						</ng-container>

						<ng-container *ngIf="fetchedPinDetails?.how_often!=null">
							<span class="quotationlist" *ngIf="fetchedPinDetails?.how_often==0">Daily</span>
							<span class="quotationlist" *ngIf="fetchedPinDetails?.how_often==1">Weekly</span>
							<span class="quotationlist" *ngIf="fetchedPinDetails?.how_often==2">Bi-weekly</span>
							<span class="quotationlist" *ngIf="fetchedPinDetails?.how_often==3">Monthly</span>
						</ng-container>
						<span class="quotationlist" *ngIf="is_urgent==1">Urgent Requirement</span>


						<ng-container *ngIf="fetchedPinDetails?.time_of_day!=null">
							<span class="quotationlist" *ngIf="fetchedPinDetails?.time_of_day==0">Morning</span>
							<span class="quotationlist" *ngIf="fetchedPinDetails?.time_of_day==1">Afternoon</span>
							<span class="quotationlist" *ngIf="fetchedPinDetails?.time_of_day==2">Evening</span>
						</ng-container>

						<ng-container *ngIf="fetchedPinDetails?.day_of_week!=null">
							<span class="quotationlist" *ngIf="fetchedPinDetails?.day_of_week==0">Anyday</span>
							<span class="quotationlist" *ngIf="fetchedPinDetails?.day_of_week==1">Weekday</span>
							<span class="quotationlist" *ngIf="fetchedPinDetails?.day_of_week==3">Individual Days</span>
							<ng-container *ngIf="fetchedPinDetails?.day_of_week==3">
								<span class="quotationlist" *ngIf="fetchedPinDetails?.ind_monday==1">Monday</span>
								<span class="quotationlist" *ngIf="fetchedPinDetails?.ind_tuesday==1">Tuesday</span>
								<span class="quotationlist" *ngIf="fetchedPinDetails?.ind_wednesday==1">Wednesday</span>
								<span class="quotationlist" *ngIf="fetchedPinDetails?.ind_thursday==1">Thursday</span>
								<span class="quotationlist" *ngIf="fetchedPinDetails?.ind_friday==1">Friday</span>
								<span class="quotationlist" *ngIf="fetchedPinDetails?.ind_saturday==1">Saturday</span>
								<span class="quotationlist" *ngIf="fetchedPinDetails?.ind_sunday==1">Sunday</span>
							</ng-container>
						</ng-container>
						<ng-container *ngIf="fetchedPinDetails?.pinner_details?.company_name!=null">
							<span class="quotationlist">{{fetchedPinDetails?.pinner_details?.company_name}}</span>
						</ng-container>
					</div>
					<div class="abs-btngrp">
						<mat-button-toggle-group name="fontStyle" aria-label="Font Style">

							<mat-button-toggle class="green-btn" value="Accept"
								*ngIf="totalDataToPrepoluate?.application_dtls?.status==2"
								(click)="acceptTheJob(fetchedPinDetails?.id,totalDataToPrepoluate?.application_dtls?.id);">Accept
							</mat-button-toggle>

							<!-- <mat-button-toggle class="green-btn" value="Accept" *ngIf="application_details?.status==2" (click)="openDialog('noPaymentOption')">Accept</mat-button-toggle> -->

							<mat-button-toggle
								*ngIf="totalDataToPrepoluate?.application_dtls?.status==0 || totalDataToPrepoluate?.application_dtls?.status==2"
								class="red-btn" value="Decline"
								(click)="declineTheJob(fetchedPinDetails?.id,totalDataToPrepoluate?.application_dtls?.id);">Decline
							</mat-button-toggle>

							<mat-button-toggle *ngIf="totalDataToPrepoluate?.application_dtls?.status==4" class="red-btn"
								value="Declined" disabled>Declined By You</mat-button-toggle>

							<mat-button-toggle *ngIf="totalDataToPrepoluate?.application_dtls?.status==3" class="red-btn"
								value="Declined" disabled>Declined By Pinner</mat-button-toggle>
							<!-- 
							  <mat-button-toggle *ngIf="totalDataToPrepoluate?.application_dtls?.status!=4 && totalDataToPrepoluate?.application_dtls?.status!=3" value="Message"  (click)="goToChat(fetchedPinDetails?.pinner_details?.id,fetchedPinDetails?.id)">Message</mat-button-toggle> -->


							<mat-button-toggle
								*ngIf="totalDataToPrepoluate?.application_dtls?.status!=4 && totalDataToPrepoluate?.application_dtls?.status!=3"
								value="Message" (click)="goToChat(fetchedPinDetails?.pinner_details?.id,fetchedPinDetails?.id)">Message
							</mat-button-toggle>

							<mat-button-toggle value="Message" routerLink="/doer/refer-doer/{{fetchedPinDetails?.id}}"
								*ngIf="totalPinData?.quotation_dtls==null">Refer Doer</mat-button-toggle>
						</mat-button-toggle-group>
					</div>
				</div>
			</div>
			<div class="col-md-12 mb-3"
				*ngIf="totalDataToPrepoluate?.application_dtls?.status==0 || (totalDataToPrepoluate?.application_dtls?.status!=1 && attachment.length>0)">
				<mat-card class="pindoCart">
					<mat-card-header>
						<mat-card-title>
							Attachments
						</mat-card-title>
					</mat-card-header>
					<mat-card-content>
						<div class="total_attach clearfix">
							<div class="upload_attachment mb-2"
								*ngIf="totalDataToPrepoluate?.application_dtls?.status==0 || totalDataToPrepoluate?.application_dtls?.status==1">
								<button type="button" mat-raised-button class="text-uppercase mat-primary btn-greenColor">Add Attachmentaaaaa</button>
								<input type="file" (change)="uploadAttachment($event)">
							</div>
							<p class="attachment_grp" *ngIf="attachment.length>0">Added Attachment:
								<span *ngFor="let eachattachment of attachment;let i = index;"><a
										href="{{uploadUrl}}/jobs/{{eachattachment?.file_name}}"
										target="_blank">{{eachattachment?.original_name}}</a>&nbsp;&nbsp;<ng-container
										*ngIf="totalDataToPrepoluate?.application_dtls?.status==0 || totalDataToPrepoluate?.application_dtls?.status==1">
										<i class="far fa-times-circle" (click)="removeAttachment(i);"></i></ng-container></span>
							</p>
						</div>
					</mat-card-content>
				</mat-card>
			</div>
			<div class="col-md-12" *ngIf="totalDataToPrepoluate?.application_dtls?.status!=5">
				<div class="row mb-4" *ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6">
					<div class="col-md-12">
						<mat-card class="pindoCart"
							*ngIf="totalDataToPrepoluate?.pin_details?.status==4 && totalDataToPrepoluate?.pin_details?.dispute!=null">
							<mat-card-header>
								<mat-card-title>
									Dispute Reason
								</mat-card-title>
							</mat-card-header>
							<mat-card-content>
								<h4>{{totalDataToPrepoluate?.pin_details?.dispute?.dispute_type}}</h4>
								<p style="white-space: pre;">{{totalDataToPrepoluate?.pin_details?.dispute?.dispute_reason}}</p>
							</mat-card-content>
						</mat-card>
					</div>
				</div>
				<ng-container
					*ngIf="totalDataToPrepoluate?.application_dtls?.status!=4 && totalDataToPrepoluate?.application_dtls?.status!=3">
					<div class="row mb-4" *ngIf="toshowQuotation && !toShowCoverLetter">
						<div class="col-md-12">
							<mat-card class="pindoCart">
								<mat-card-header>
									<mat-card-title>
										Cover Letter
										<button mat-raised-button class="dashboardprimary text-uppercase float-right"
											*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && totalDataToPrepoluate?.pin_details?.status==2"
											(click)="toShowCoverLetter=!toShowCoverLetter">Edit</button>
									</mat-card-title>
								</mat-card-header>
								<mat-card-content>
									<!-- <p class="attachment_grp" *ngIf="attachment.length>0 || populatedAttachments.length>0"><b>Added Attachment:</b>
								  	<span *ngFor="let eachpopulatedattachment of populatedAttachments;">{{eachpopulatedattachment.file_name}}</span>
								  	<span *ngFor="let eachattachment of attachment;let i = index;">{{eachattachment}}&nbsp;&nbsp;<i class="far fa-times-circle" (click)="removeAttachment(i);"></i></span>
							  	</p> -->
									<p>{{editModeCoverLetter}}</p>
								</mat-card-content>
							</mat-card>
						</div>
					</div>
					<form #applyPins="ngForm" novalidate (ngSubmit)="applyPinsSubmit(applyPins)">
						<div class="row">
							<div class="col-md-12">
								<mat-card class="pindoCart" [hidden]="!toShowCoverLetter">
									<mat-card-header>
										<mat-card-title>
											Cover Letter
											<div class="upload_attachment float-right">
												<input type="file" (change)="uploadAttachment($event)">
												<!-- <button type="button" mat-raised-button class="dashboardprimary text-uppercase float-right">Add Attachment</button> -->
											</div>
											<button type="button" mat-raised-button class="dashboardprimary text-uppercase float-right"
												*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6"
												(click)="toShowCoverLetter=!toShowCoverLetter">Undo</button>
											<p class="float-right cardtitlesubtext mr-2">Write a cover letter to describe your services</p>
										</mat-card-title>
									</mat-card-header>
									<mat-card-content>
										<!-- <p class="attachment_grp" *ngIf="attachment.length>0 || populatedAttachments.length>0"><b>Added Attachment:</b>
									  	<span *ngFor="let eachpopulatedattachment of populatedAttachments;">{{eachpopulatedattachment.file_name}}</span>
									  	<span *ngFor="let eachattachment of attachment;let i = index;">{{eachattachment}}&nbsp;&nbsp;<i class="far fa-times-circle" (click)="removeAttachment(i);"></i></span>
								  	</p> -->
										<mat-form-field appearance="outline" class="tot_payment cov_letter">
											<mat-label>Type your cover letter here....</mat-label>
											<textarea name="coverLetter" #coverLet="ngModel" [(ngModel)]="appyPinsModel.coverLetter" matInput
												placeholder="Type your cover letter here...." required></textarea>
											<mat-error *ngIf="coverLet.errors?.required && applyPins.submitted">This is a required Field
											</mat-error>
										</mat-form-field>
									</mat-card-content>
								</mat-card>
								<mat-card class="pindoCart" [hidden]="!toShowPaymentTerms"
									*ngIf="(this.foreditOnly['mlstnType']=='normal_milestones' && totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && !ifInOngoingModeAddNewMilestone) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status!=6) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && addNewMilestoneType=='Normal Milestone')">
									<mat-card-header>
										<mat-card-title>
											Payment Terms
											<button type="button" mat-raised-button class="dashboardprimary text-uppercase float-right"
												*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6"
												(click)="unsetEdit()">Undo</button>
											<p class="float-right cardtitlesubtext mr-2">Please set the milestones for the job</p>
										</mat-card-title>
									</mat-card-header>
									<mat-card-content>
										<ng-container *ngIf="show_data">
											<div class="total_field d-flex"
												*ngIf="(fetchedPinDetails?.job_type==0 || fetchedPinDetails?.is_urgent==1) && totalDataToPrepoluate.quotation_dtls?.application_dtls?.status!=6">
												<p class="mr-5">What kind of payment you are offerring for this job?</p>
												<mat-radio-group class="green-color" name="typeOfPayment" #selectPayType="ngModel"
													[(ngModel)]="appyPinsModel.selectPaymentType">
													<mat-radio-button *ngFor="let eachPaymentType of paymentTypes" [value]="eachPaymentType.value"
														class="mr-4" (change)="countTotalprc()">{{eachPaymentType.name}}</mat-radio-button>
												</mat-radio-group>
											</div>
											<!-- Fixed Payment Type -->
											<div class="total-paymentSet fixedPayment"
												*ngIf="(appyPinsModel.selectPaymentType==1 && fetchedPinDetails?.job_type==0) || (appyPinsModel.selectPaymentType==1 && fetchedPinDetails?.is_urgent==1)">
												<h6 class="maincardsubHeading">Set Job Milestones</h6>
												<div class="customrightgapfieldgroup" ngModelGroup="fixedPaymentGrp"
													#fixedPaymentGrp="ngModelGroup">
													<div class="row">
														<div class="col-md-8">
															<mat-form-field appearance="outline" class="tot_payment">
																<mat-label>Milestone Name</mat-label>
																<input matInput name="fixedPaymentmilestoneName" #fixedMlsName="ngModel"
																	[(ngModel)]="appyPinsModel.fixedPrice.milestoneName" placeholder="Milestone Name*"
																	[required]="(applyPins.submitted && fixedPriceMilestones.length==0) || (requiredtobeFixedPayments)"
																	[disabled]="(totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifEditGetFixedPriceMilestonesIndex=='NULL' && !ifInOngoingModeAddNewMilestone) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && countnumberOfClicks==1)">
																<mat-error
																	*ngIf="fixedMlsName.errors?.required && (fixedMlsName.touched || applyPins.submitted)">
																	This is a required Field</mat-error>
															</mat-form-field>
														</div>
														<div class="col-md-4">
															<mat-form-field appearance="outline" class="tot_prc mlstPrc"
																[ngClass]="{'mat-form-field-invalid':fixedPaymentGrp.errors?.checkEmpty && (fixedMlsPrice.touched || applyPins.submitted || detectFixedPrcAdded)}">
																<mat-label>Milestone Price</mat-label>
																<input matInput name="fixedPaymentmilestonePrc" #fixedMlsPrice="ngModel"
																	[(ngModel)]="appyPinsModel.fixedPrice.milestonePrc" placeholder="Milestone Price*"
																	type="number"
																	[required]="(applyPins.submitted && fixedPriceMilestones.length==0) || (requiredtobeFixedPayments)"
																	[disabled]="(totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifEditGetFixedPriceMilestonesIndex=='NULL' && !ifInOngoingModeAddNewMilestone) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && countnumberOfClicks==1)">
																<span matPrefix>$&nbsp;&nbsp;|&nbsp;&nbsp;</span>
																<mat-error
																	*ngIf="fixedMlsPrice.errors?.required && (fixedMlsPrice.touched || applyPins.submitted)">
																	This is a required Field</mat-error>
															</mat-form-field>
														</div>
														<!-- <mat-error *ngIf="fixedPaymentGrp.errors?.checkEmpty && (fixedMlsPrice.touched || applyPins.submitted || detectFixedPrcAdded)" class="abs-error col-md-12 text-center">This is a required Field</mat-error> -->
													</div>

													<div class="absrightPos justify-content-end d-flex align-items-center"
														*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status!=6 || (totalDataToPrepoluate.quotation_dtls?.application_dtls.status==6 && ifEditGetFixedPriceMilestonesIndex!='NULL' && !ifInOngoingModeAddNewMilestone)">
														<button type="button" mat-icon-button color="primary"
															(click)="submitPrice(appyPinsModel.selectPaymentType,fixedPaymentGrp,'No')"
															class="add_btn">
															<mat-icon>add</mat-icon>
														</button>
													</div>
													<div class="absrightPos justify-content-end d-flex align-items-center"
														*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status!=6 || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && countnumberOfClicks==0)">
														<button type="button" mat-icon-button color="primary"
															(click)="submitPrice(appyPinsModel.selectPaymentType,fixedPaymentGrp,'Yes')"
															class="add_btn">
															<mat-icon>add</mat-icon>
														</button>
													</div>
												</div>
												<div class="customrightgapfieldgroup onlyedit"
													*ngFor="let eachFixedPrice of fixedPriceMilestones;let i = index;">
													<ng-container *ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status!=6">
														<div class="row">
															<div class="col-md-8">
																<div class="listingshow d-flex align-items-center">{{eachFixedPrice.milestoneName}}
																</div>
															</div>
															<div class="col-md-4">
																<div class="listingshow d-flex align-items-center"><span
																		class="prefix_show">$&nbsp;|</span>&nbsp;{{eachFixedPrice.milestonePrc}}</div>
															</div>
														</div>
														<div class="absrightPos justify-content-end d-flex align-items-center">
															<button type="button" mat-icon-button color="primary"
																[disabled]="ifEditGetFixedPriceMilestonesIndex!='NULL'"
																(click)="editThisMilestone(i,appyPinsModel.selectPaymentType)" class="mr-2">
																<mat-icon>create</mat-icon>
															</button>
															<button type="button" mat-icon-button color="primary"
																(click)="removeThisMilestone(i,appyPinsModel.selectPaymentType)"
																[disabled]="ifEditGetFixedPriceMilestonesIndex!='NULL'" class="">
																<mat-icon>remove</mat-icon>
															</button>
														</div>
													</ng-container>
													<!-- for ongoing pins edit mode -->
													<ng-container
														*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && eachFixedPrice.edit_request==1  && !ifInOngoingModeAddNewMilestone">
														<div class="row">
															<div class="col-md-8">
																<div class="listingshow d-flex align-items-center">{{eachFixedPrice.milestoneName}}
																</div>
															</div>
															<div class="col-md-4">
																<div class="listingshow d-flex align-items-center"><span
																		class="prefix_show">$&nbsp;|</span>&nbsp;{{eachFixedPrice.milestonePrc}}</div>
															</div>
														</div>
														<div class="absrightPos justify-content-end d-flex align-items-center">
															<button type="button" mat-icon-button color="primary"
																[disabled]="ifEditGetFixedPriceMilestonesIndex!='NULL'"
																(click)="editThisMilestone(i,appyPinsModel.selectPaymentType)" class="mr-2">
																<mat-icon>create</mat-icon>
															</button>
															<!-- <button type="button" mat-icon-button color="primary" (click)="removeThisMilestone(i,appyPinsModel.selectPaymentType)" [disabled]="ifEditGetFixedPriceMilestonesIndex!='NULL'" class="">
														    <mat-icon>remove</mat-icon>
														</button> -->
														</div>
													</ng-container>
													<ng-container
														*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && eachFixedPrice.id==0 && addNewMilestoneType=='Normal Milestone' && ifInOngoingModeAddNewMilestone">
														<div class="row">
															<div class="col-md-8">
																<div class="listingshow d-flex align-items-center">{{eachFixedPrice.milestoneName}}
																</div>
															</div>
															<div class="col-md-4">
																<div class="listingshow d-flex align-items-center"><span
																		class="prefix_show">$&nbsp;|</span>&nbsp;{{eachFixedPrice.milestonePrc}}</div>
															</div>
														</div>
														<div class="absrightPos justify-content-end d-flex align-items-center">
															<button type="button" mat-icon-button color="primary"
																[disabled]="ifEditGetFixedPriceMilestonesIndex!='NULL'"
																(click)="editThisMilestone(i,appyPinsModel.selectPaymentType)" class="mr-2">
																<mat-icon>create</mat-icon>
															</button>
															<button type="button" mat-icon-button color="primary"
																(click)="removeThisMilestone(i,appyPinsModel.selectPaymentType,'customremoval')"
																[disabled]="ifEditGetFixedPriceMilestonesIndex!='NULL'" class="removethisPayment">
																<mat-icon>remove</mat-icon>
															</button>
														</div>
													</ng-container>
												</div>
											</div>
											<!-- hourly Payment Type -->
											<div class="total-paymentSet hourlyPayment"
												*ngIf="(appyPinsModel.selectPaymentType==2 && fetchedPinDetails?.job_type==0) || (appyPinsModel.selectPaymentType==2 && fetchedPinDetails?.is_urgent==1)">
												<h6 class="maincardsubHeading">Set Job Milestones</h6>
												<div class="customrightgapfieldgroup">
													<div class="row" ngModelGroup="hourlyPaymentGrp" #hourlyPaymentGrp="ngModelGroup">
														<div class="col-md-8">
															<mat-form-field appearance="outline">
																<mat-label>MIlestone Name</mat-label>
																<input matInput name="hourlyPaymentmilestoneName" #hrlyPayMlsName="ngModel"
																	[(ngModel)]="appyPinsModel.hourlyPrice.milestoneName" placeholder="MIlestone Name*"
																	[required]="(applyPins.submitted && hourlyPriceMilestones.length==0) || (requiredtobeHourlyPayments)"
																	[disabled]="(totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifEditGetHourlyPriceMilestonesIndex=='NULL' && !ifInOngoingModeAddNewMilestone) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && countnumberOfClicks==1)">
																<mat-error
																	*ngIf="hrlyPayMlsName.errors?.required && (hrlyPayMlsName.touched || applyPins.submitted)">
																	This is a required Field</mat-error>
															</mat-form-field>
														</div>
														<div class="col-md-4">
															<div class="row">
																<div class="col-md-6">
																	<mat-form-field appearance="outline" class="tot_prc hrlRt">
																		<mat-label>Hourly Rate</mat-label>
																		<input matInput name="hourlyRate" #hrlyRate="ngModel"
																			[(ngModel)]="appyPinsModel.hourlyPrice.milestonePrc" placeholder="Hourly Rate*"
																			type="number"
																			[required]="(applyPins.submitted && hourlyPriceMilestones.length==0) || (requiredtobeHourlyPayments)"
																			[disabled]="(totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifEditGetHourlyPriceMilestonesIndex=='NULL' && !ifInOngoingModeAddNewMilestone) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && countnumberOfClicks==1)">
																		<span matPrefix>$&nbsp;&nbsp;|&nbsp;&nbsp;</span>
																		<mat-error
																			*ngIf="hrlyRate.errors?.required && (hrlyRate.touched || applyPins.submitted)">
																			This is a required Field</mat-error>
																	</mat-form-field>
																</div>
																<div class="col-md-6">
																	<mat-form-field appearance="outline" class="tot_payment">
																		<mat-label>Working Hours</mat-label>
																		<input matInput name="hourlyWorkingHours" #hrlyWrkngHrs="ngModel"
																			[(ngModel)]="appyPinsModel.hourlyPrice.workingHrs" placeholder="Working Hours*"
																			type="number"
																			[required]="(applyPins.submitted && hourlyPriceMilestones.length==0) || (requiredtobeHourlyPayments)"
																			[disabled]="(totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifEditGetHourlyPriceMilestonesIndex=='NULL' && !ifInOngoingModeAddNewMilestone) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && countnumberOfClicks==1)">
																		<mat-error
																			*ngIf="(hrlyWrkngHrs.errors?.required) && (hrlyWrkngHrs.touched || applyPins.submitted)">
																			This is a required Field</mat-error>
																	</mat-form-field>
																</div>
															</div>
														</div>
													</div>
													<div class="absrightPos justify-content-end d-flex align-items-center"
														*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status!=6 || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifEditGetHourlyPriceMilestonesIndex!='NULL' && !ifInOngoingModeAddNewMilestone)">
														<button type="button" mat-icon-button color="primary" class="add_btn"
															(click)="submitPrice(appyPinsModel.selectPaymentType,hourlyPaymentGrp,'No')">
															<mat-icon>add</mat-icon>
														</button>
													</div>
													<div class="absrightPos justify-content-end d-flex align-items-center"
														*ngIf="(totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && countnumberOfClicks==0)">
														<button type="button" mat-icon-button color="primary" class="add_btn"
															(click)="submitPrice(appyPinsModel.selectPaymentType,hourlyPaymentGrp,'Yes')">
															<mat-icon>add</mat-icon>
														</button>
													</div>
												</div>
												<div class="customrightgapfieldgroup onlyedit"
													*ngFor="let eachHourlyPrice of hourlyPriceMilestones;let i = index;">
													<ng-container *ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status!=6">
														<div class="row">
															<div class="col-md-8">
																<div class="listingshow d-flex align-items-center">{{eachHourlyPrice.milestoneName}}
																</div>
															</div>
															<div class="col-md-4">
																<div class="row">
																	<div class="col-md-6">
																		<div class="listingshow d-flex align-items-center"><span
																				class="prefix_show">$&nbsp;|</span>&nbsp;{{eachHourlyPrice.milestonePrc}}</div>
																	</div>
																	<div class="col-md-6">
																		<div class="listingshow d-flex align-items-center">{{eachHourlyPrice.workingHrs}}
																		</div>
																	</div>
																</div>
															</div>
														</div>
														<div class="absrightPos justify-content-end d-flex align-items-center">
															<button type="button" mat-icon-button color="primary" class="mr-2"
																[disabled]="ifEditGetHourlyPriceMilestonesIndex!='NULL'"
																(click)="editThisMilestone(i,appyPinsModel.selectPaymentType)">
																<mat-icon>create</mat-icon>
															</button>
															<button type="button" mat-icon-button color="primary" class=""
																(click)="removeThisMilestone(i,appyPinsModel.selectPaymentType)"
																[disabled]="ifEditGetHourlyPriceMilestonesIndex!='NULL'">
																<mat-icon>remove</mat-icon>
															</button>
														</div>
													</ng-container>
													<ng-container
														*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && eachHourlyPrice.edit_request==1 && !ifInOngoingModeAddNewMilestone">
														<div class="row">
															<div class="col-md-8">
																<div class="listingshow d-flex align-items-center">{{eachHourlyPrice.milestoneName}}
																</div>
															</div>
															<div class="col-md-4">
																<div class="row">
																	<div class="col-md-6">
																		<div class="listingshow d-flex align-items-center"><span
																				class="prefix_show">$&nbsp;|</span>&nbsp;{{eachHourlyPrice.milestonePrc}}</div>
																	</div>
																	<div class="col-md-6">
																		<div class="listingshow d-flex align-items-center">{{eachHourlyPrice.workingHrs}}
																		</div>
																	</div>
																</div>
															</div>
														</div>
														<div class="absrightPos justify-content-end d-flex align-items-center">
															<button type="button" mat-icon-button color="primary" class="mr-2"
																[disabled]="ifEditGetHourlyPriceMilestonesIndex!='NULL'"
																(click)="editThisMilestone(i,appyPinsModel.selectPaymentType)">
																<mat-icon>create</mat-icon>
															</button>
															<!-- <button type="button" mat-icon-button color="primary" class="" (click)="removeThisMilestone(i,appyPinsModel.selectPaymentType)" [disabled]="ifEditGetHourlyPriceMilestonesIndex!='NULL'">
														    <mat-icon>remove</mat-icon>
														</button> -->
														</div>
													</ng-container>
													<ng-container
														*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && eachHourlyPrice.id==0 && addNewMilestoneType=='Normal Milestone' && ifInOngoingModeAddNewMilestone">
														<div class="row">
															<div class="col-md-8">
																<div class="listingshow d-flex align-items-center">{{eachHourlyPrice.milestoneName}}
																</div>
															</div>
															<div class="col-md-4">
																<div class="row">
																	<div class="col-md-6">
																		<div class="listingshow d-flex align-items-center"><span
																				class="prefix_show">$&nbsp;|</span>&nbsp;{{eachHourlyPrice.milestonePrc}}</div>
																	</div>
																	<div class="col-md-6">
																		<div class="listingshow d-flex align-items-center">{{eachHourlyPrice.workingHrs}}
																		</div>
																	</div>
																</div>
															</div>
														</div>
														<div class="absrightPos justify-content-end d-flex align-items-center">
															<button type="button" mat-icon-button color="primary" class="mr-2"
																[disabled]="ifEditGetHourlyPriceMilestonesIndex!='NULL'"
																(click)="editThisMilestone(i,appyPinsModel.selectPaymentType)">
																<mat-icon>create</mat-icon>
															</button>
															<button type="button" mat-icon-button color="primary" class="removethisPayment"
																(click)="removeThisMilestone(i,appyPinsModel.selectPaymentType,'customremoval')"
																[disabled]="ifEditGetHourlyPriceMilestonesIndex!='NULL'">
																<mat-icon>remove</mat-icon>
															</button>
														</div>
													</ng-container>
												</div>
											</div>
										</ng-container>
										<ng-container *ngIf="show_data">
											<div class="total-paymentSet hourlyPayment" *ngIf="fetchedPinDetails?.job_type==1">
												<h6 class="maincardsubHeading">Set Job Milestones</h6>
												<div class="customrightgapfieldgroup pr-0">
													<div class="row" ngModelGroup="recurringPaymentGrp" #recurringPaymentGrp="ngModelGroup">
														<div class="col-md-8">
															<mat-form-field appearance="outline">
																<mat-label>MIlestone Name</mat-label>
																<input matInput name="recurringPaymentmilestoneName" #recurringPayMlsName="ngModel"
																	[(ngModel)]="appyPinsModel.recurringPrice.milestoneName" placeholder="MIlestone Name*"
																	required>
																<mat-error *ngIf="recurringPayMlsName.errors?.required && applyPins.submitted">This is a
																	required Field</mat-error>
															</mat-form-field>
														</div>
														<div class="col-md-4">
															<div class="row">
																<div class="col-md-6">
																	<mat-form-field appearance="outline" class="tot_prc">
																		<mat-label>Hourly Rate</mat-label>
																		<input matInput name="recurringhourlyRate" #recurringhrlyRate="ngModel"
																			[(ngModel)]="appyPinsModel.recurringPrice.milestonePrc" placeholder="Hourly Rate*"
																			type="number" (blur)="countTotalprc()" required>
																		<span matPrefix>$&nbsp;&nbsp;|&nbsp;&nbsp;</span>
																		<mat-error *ngIf="recurringhrlyRate.errors?.required && applyPins.submitted">This is
																			a required Field</mat-error>
																	</mat-form-field>
																</div>
																<div class="col-md-6">
																	<mat-form-field appearance="outline" class="tot_payment">
																		<mat-label>Working Hours</mat-label>
																		<input matInput name="recurringhourlyWorkingHours" #recurringhrlyWrkngHrs="ngModel"
																			[(ngModel)]="appyPinsModel.recurringPrice.workingHrs" (blur)="countTotalprc()"
																			placeholder="Working Hours*" type="number" required>
																		<mat-error *ngIf="recurringhrlyWrkngHrs.errors?.required && applyPins.submitted">
																			This is a required Field</mat-error>
																	</mat-form-field>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</ng-container>
									</mat-card-content>
								</mat-card>
								<mat-card class="pindoCart" [hidden]="!toShowPaymentTerms"
									*ngIf="(this.foreditOnly['mlstnType']=='additional_milestones' && totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && !ifInOngoingModeAddNewMilestone) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status!=6) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && addNewMilestoneType=='Additional Milestone')">
									<mat-card-header>
										<mat-card-title>
											Additional Payment Terms
											<button type="button" mat-raised-button class="dashboardprimary text-uppercase float-right"
												*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6"
												(click)="unsetEdit()">Undo</button>
											<p class="float-right cardtitlesubtext mr-2">Please specify the additional requirements</p>
										</mat-card-title>
									</mat-card-header>
									<mat-card-content>
										<h6 class="maincardsubHeading">Set Other Payment Details</h6>
										<div class="customrightgapfieldgroup">
											<div class="row" ngModelGroup="setOtherPayment" #setOtherPayment="ngModelGroup">
												<div class="col-md-8">
													<mat-form-field appearance="outline" class="tot_payment">
														<mat-label>Payment Description</mat-label>
														<input matInput name="otherPaymentDescription" #othrPaymDesc="ngModel"
															[(ngModel)]="appyPinsModel.addtnlPayments.paymentDesc" placeholder="Payment Description*"
															[required]="(applyPins.submitted && appyPinsModel.addtnlPayments.totalPrc!='') || requiredtobeAddntlPayments"
															[disabled]="(totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && !checkIfInEditModeOtherPayments && !ifInOngoingModeAddNewMilestone) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && countnumberOfClicks==1)">
														<mat-error
															*ngIf="othrPaymDesc.errors?.required && (othrPaymDesc.touched || applyPins.submitted)">
															This is a required Field</mat-error>
													</mat-form-field>
												</div>
												<div class="col-md-4">
													<mat-form-field appearance="outline" class="tot_prc">
														<mat-label>Total Price</mat-label>
														<input matInput name="otherPaymentTotalPrc" #otherPayTotalPrc="ngModel"
															[(ngModel)]="appyPinsModel.addtnlPayments.totalPrc" placeholder="Total Price*"
															type="number"
															[required]="((otherPayTotalPrc.touched || applyPins.submitted) && appyPinsModel.addtnlPayments.paymentDesc!='') || requiredtobeAddntlPayments"
															[disabled]="(totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && !checkIfInEditModeOtherPayments && !ifInOngoingModeAddNewMilestone) || (totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && countnumberOfClicks==1)">
														<mat-error
															*ngIf="otherPayTotalPrc.errors?.required && (otherPayTotalPrc.touched || applyPins.submitted)">
															This is a required Field</mat-error>
														<span matPrefix>$&nbsp;&nbsp;|&nbsp;&nbsp;</span>
													</mat-form-field>
												</div>
											</div>
											<div class="absrightPos justify-content-end d-flex align-items-center"
												*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status!=6">
												<button type="button" mat-icon-button color="primary" class="add_btn"
													(click)="addOtherPayment(setOtherPayment,'No')">
													<mat-icon>add</mat-icon>
												</button>
											</div>
											<div class="absrightPos justify-content-end d-flex align-items-center"
												*ngIf="(totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && checkIfInEditModeOtherPayments && !ifInOngoingModeAddNewMilestone)">
												<button type="button" mat-icon-button color="primary" class="add_btn"
													(click)="addOtherPayment(setOtherPayment,'No')">
													<mat-icon>add</mat-icon>
												</button>
											</div>
											<div class="absrightPos justify-content-end d-flex align-items-center"
												*ngIf="(totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && ifInOngoingModeAddNewMilestone && countnumberOfClicks==0)">
												<button type="button" mat-icon-button color="primary" class="add_btn"
													(click)="addOtherPayment(setOtherPayment,'Yes')">
													<mat-icon>add</mat-icon>
												</button>
											</div>
										</div>
										<div class="customrightgapfieldgroup onlyedit"
											*ngFor="let eachOtherPayment of addOtherPaymentsCollection;let i = index;">
											<ng-container *ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status!=6">
												<div class="row">
													<div class="col-md-8">
														<div class="listingshow d-flex align-items-center">
															{{eachOtherPayment.otherPaymentDescription}}</div>
													</div>
													<div class="col-md-4">
														<div class="listingshow d-flex align-items-center"><span
																class="prefix_show">$&nbsp;|</span>&nbsp;{{eachOtherPayment.milestonePrc}}</div>
													</div>
												</div>
												<div class="absrightPos justify-content-end d-flex align-items-center">
													<button type="button" [disabled]="checkIfInEditModeOtherPayments" mat-icon-button
														color="primary" class="mr-2" (click)="editThisOtherPayment(i)">
														<mat-icon>create</mat-icon>
													</button>
													<button type="button" [disabled]="checkIfInEditModeOtherPayments" mat-icon-button
														color="primary" class="" (click)="removeOtherPayment(i)">
														<mat-icon>remove</mat-icon>
													</button>
												</div>
											</ng-container>
											<ng-container
												*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && eachOtherPayment.edit_request==1 && !ifInOngoingModeAddNewMilestone">
												<div class="row">
													<div class="col-md-8">
														<div class="listingshow d-flex align-items-center">
															{{eachOtherPayment.otherPaymentDescription}}</div>
													</div>
													<div class="col-md-4">
														<div class="listingshow d-flex align-items-center"><span
																class="prefix_show">$&nbsp;|</span>&nbsp;{{eachOtherPayment.milestonePrc}}</div>
													</div>
												</div>
												<div class="absrightPos justify-content-end d-flex align-items-center">
													<button type="button" [disabled]="checkIfInEditModeOtherPayments" mat-icon-button
														color="primary" class="mr-2" (click)="editThisOtherPayment(i)">
														<mat-icon>create</mat-icon>
													</button>
													<!-- <button type="button" [disabled]="checkIfInEditModeOtherPayments" mat-icon-button color="primary" class="" (click)="removeOtherPayment(i)">
												    <mat-icon>remove</mat-icon>
												</button> -->
												</div>
											</ng-container>
											<ng-container
												*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && eachOtherPayment.id==0 && addNewMilestoneType=='Additional Milestone' && ifInOngoingModeAddNewMilestone">
												<div class="row">
													<div class="col-md-8">
														<div class="listingshow d-flex align-items-center">
															{{eachOtherPayment.otherPaymentDescription}}</div>
													</div>
													<div class="col-md-4">
														<div class="listingshow d-flex align-items-center"><span
																class="prefix_show">$&nbsp;|</span>&nbsp;{{eachOtherPayment.milestonePrc}}</div>
													</div>
												</div>
												<div class="absrightPos justify-content-end d-flex align-items-center">
													<button type="button" [disabled]="checkIfInEditModeOtherPayments" mat-icon-button
														color="primary" class="mr-2" (click)="editThisOtherPayment(i)">
														<mat-icon>create</mat-icon>
													</button>
													<button type="button" [disabled]="checkIfInEditModeOtherPayments" mat-icon-button
														color="primary" class="removethisPayment" (click)="removeOtherPayment(i,'customremoval')">
														<mat-icon>remove</mat-icon>
													</button>
												</div>
											</ng-container>
										</div>
									</mat-card-content>
								</mat-card>
								<div class="total_quoteVal d-flex justify-content-between" *ngIf="toShowPaymentTerms">
									<p>Total Quotation Amount</p>
									<p class="prcVal">$ {{totalPrice | number:'.2-2'}}</p>
								</div>
								<p *ngIf="toShowPaymentTerms" class="text-right text-uppercase disclaimer-text">**If you are required to
									collect sales taxes please remember to include in your quote</p>
								<div class="d-flex justify-content-end pt-5" *ngIf="toShowCoverLetter || toShowPaymentTerms">
									<button type="submit" mat-raised-button color="primary" class="text-uppercase mat-primary mr-2 mb-4">
										submit Quotation
									</button>
								</div>
							</div>
						</div>
					</form>
					<div class="row" *ngIf="toshowQuotation" [hidden]="toShowPaymentTerms">
						<div class="col-md-12 mb-4">
							<mat-card class="pindoCart">
								<mat-card-header>
									<mat-card-title>
										Payment Terms
										<!-- <button mat-raised-button class="dashboardprimary text-uppercase float-right" *ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls.status==6 && totalDataToPrepoluate.quotation_dtls?.add_milestone_request==0" (click)="openDialog('forchoosingMilestone')">Add New Milestone</button> -->
										<button mat-raised-button class="dashboardprimary text-uppercase float-right"
											*ngIf="totalDataToPrepoluate.quotation_dtls?.application_dtls?.status==6 && totalDataToPrepoluate?.pin_details?.status==2"
											(click)="openDialog('forchoosingMilestone')">Add New Milestone</button>
									</mat-card-title>
								</mat-card-header>
								<mat-card-content>
									<app-prepopulated-payment [totalPaymentData]="totalDataToPrepoluate"
										[chosenPaymentOptn]="paymentOptnChosen" (paymentRequestSend)="getQuotationPageDetails()"
										(editRequestSend)="getQuotationPageDetails()" (toggleEditMode)="toseeData($event)"
										(choosePaymentMode)="openDialog('choose_payment')"></app-prepopulated-payment>
								</mat-card-content>
							</mat-card>
						</div>
					</div>
				</ng-container>

			</div>
		</div>

	</div>
</div>